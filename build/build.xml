<!-- $Id: build.xml,v 1.4 2004/09/29 15:18:33 srt Exp $ -->

<project name="asterisk-java" default="dist" basedir=".." >
	<property file="build/global.properties"/>
	
	<path id="lib.path">
        <fileset dir="lib">
            <include name="*.jar"/>
        </fileset>
    	<dirset dir=".">
    		<include name="lib" />
    	</dirset>
    </path>

	<!-- clean up temporary build directories -->
    <target name="clean">
        <delete dir="${build.dir}"/>
    	<delete dir="${javadoc.dir}"/>
    </target>

	<!-- compile java classes -->
    <target name="compile" depends="">
    	<mkdir dir="${build.dir}/classes"/>
        <javac
            classpathref="lib.path"
            srcdir="${src.dir}"
            destdir="${build.dir}/classes"
        	debug="${javac.debug}">
        	<!-- <compilerarg value="-Xlint:unchecked" /> -->
            <include name="**/*.java"/>
        </javac>
    </target>

	<!-- package classes -->
    <target name="jar" depends="compile" >
        <jar
            basedir="${build.dir}/classes"
            destfile="${build.dir}/${ant.project.name}.jar">
        </jar>
    </target>
	
	<target name="javadoc">

		<javadoc
			classpathref="lib.path"
			destdir="${javadoc.dir}"
			author="true"
			version="true"
			use="true"
			breakiterator="true"
			windowtitle="${javadoc.title}">

			<packageset dir="${src.dir}" defaultexcludes="yes">
				<include name="**" />
			</packageset>

			<doctitle><![CDATA[<h1>${javadoc.title}</h1>]]></doctitle>
			<bottom>
				<![CDATA[
					<a href="http://sourceforge.net" target="_top"><img src="http://sourceforge.net/sflogo.php?group_id=118998&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" align="right"/></a>
					<i>Copyright &#169; 2004 Stefan Reuter. All Rights Reserved.</i>
				]]></bottom>
			<link offline="true" href="http://java.sun.com/j2se/1.5/docs/api/" packagelistLoc="/usr/java/jdk1.5.0/docs/api/" />
		</javadoc>
	</target>

	<!-- copy jar to dist dir -->
    <target name="dist" depends="clean,jar,javadoc">
    	<mkdir dir="${dist.dir}" />
        <copy todir="${dist.dir}">
            <fileset dir="${build.dir}">
                <include name="*.jar"/>
            </fileset>
        </copy>
    </target>

</project>